<!DOCTYPE html>
<html lang="en">

    <!-- Basic -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">   
   
    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
 
     <!-- Site Metas -->
    <title>StyleBarber - Bootstrap 4 Responsive HTML5 Template</title>  
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Site Icons -->
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- Site CSS -->
    <link rel="stylesheet" href="style.css">
    <!-- ALL VERSION CSS -->
    <link rel="stylesheet" href="css/versions.css">
    <!-- Responsive CSS -->
    <link rel="stylesheet" href="css/responsive.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/custom.css">
	<script src="https://kit.fontawesome.com/83dc3f8bbf.js" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>

	<style>

.pulse {
    width: 70px;
    height: 70px;
    background-color: red;
    border-radius: 50%;
    position: relative;
    animation: animate 3s linear infinite
}

.pulse i {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 30px;
    color: #fff;
    height: 100%;
    cursor: pointer
}
.selecionada{
	box-shadow: 5px 5px 5px green;  
    background: white;
}

@keyframes animate {
    0% {
        box-shadow: 0 0 0 0 rgb(255, 109, 74, 0.7), 0 0 0 0 rgb(255, 109, 74, 0.7)
    }

    40% {
        box-shadow: 0 0 0 50px rgb(255, 109, 74, 0), 0 0 0 0 rgb(255, 109, 74, 0.7)
    }

    80% {
        box-shadow: 0 0 0 50px rgb(255, 109, 74, 0), 0 0 0 30px rgb(255, 109, 74, 0)
    }

    100% {
        box-shadow: 0 0 0 0 rgb(255, 109, 74, 0), 0 0 0 30px rgb(255, 109, 74, 0)
    }
}


.body {
  background : #BBDEFB;
  animation: sky 20s infinite linear;
}

.blobs{
  filter:url('#goo');
  position:fixed;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
}

.one {
  left: 50%;
  animation: moon 20s infinite linear;
}
.four {
  left: calc(50% - 50px);
  transform: scale(0.5);
  animation: loader 20s infinite ease;
  filter: blur(25px);
  opacity: 1 !important;
  background: rgba(255,255,255,1) !important;
}

@-webkit-keyframes loader {
  0% {transform: translate(500px, 0px) scale(0.9);}
  25% {transform: translate(45px, 0px) scale(0.9);}
  50% {transform: translate(-375px, 0px) scale(0.9);}
  75% {transform: translate(45px, 0px) scale(0.9);}
  100% {transform: translate(500px, 0px) scale(0.9);}
}

@-webkit-keyframes moon {
  0% {background-position: 100% 50%;}
  17% {background-position: 50% 50%;}
  25% {background-position: 50% 50%;}
  50% {background-position: 0% 50%;}
  67% {background-position: 50% 50%;}
  75% {background-position: 50% 50%;}
  100% {background-position: 100% 50%;}
}

@-webkit-keyframes sky {
  0% {background: white;}
  17.5% {background: red;}
  25% {background: red;}
  50% {background: black;}
  67.5% {background: red;}
  75% {background: red;}
  100% {background: white;}
}

.blob{
  position:fixed;
  background: linear-gradient(90deg,#fff, #ECEFF1, #CFD8DC, #263238, #263238, #CFD8DC, #ECEFF1, #fff);
  background-size: 1000% 1000%;
  top:50%;
  width:100px;
  height:100px;
  line-height:100px;
  text-align:center;
  color:white;
  font-size:40px;
  border-radius:100%;
  margin-top:-50px;
  margin-left:-50px;
}

.norm {
  filter: blur(1px);
}

.modal-lg, .modal-content{
	max-width: 98%;
	margin: auto;
}
	</style>

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>
<body class="barber_version">

    <!-- LOADER -->
    <div id="preloader">
        <div class="cube-wrapper">
		  <div class="cube-folding">
			<span class="leaf1"></span>
			<span class="leaf2"></span>
			<span class="leaf3"></span>
			<span class="leaf4"></span>
		  </div>
		  <div class="mus">
			<img src="images/lode-img.png" alt="" />
		  </div>
		  <span class="loading" data-name="Loading">SMBarber Loading</span>
		</div>
    </div><!-- end loader -->
    <!-- END LOADER -->

	<div  style="display: none;" class="top-add alert alert-light alert-dismissible">
		<button type="button" class="close" data-dismiss="alert">&times;</button>
		<strong>Success!</strong> This alert box could indicate a successful or positive action.
	</div>
    <!-- Start header -->
	<header class="top-navbar">
		<nav class="navbar navbar-expand-lg navbar-light bg-light">
			<div class="container">
				<a class="navbar-brand" href="index.html">
					<img  style="max-width: 100px" src="images/logo.png" alt="" />
				</a>
				<button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbars-rs-food" aria-controls="navbars-rs-food" aria-expanded="false" aria-label="Toggle navigation">
					<span class="icon-bar top-bar"></span>
					<span class="icon-bar middle-bar"></span>
					<span class="icon-bar bottom-bar"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbars-rs-food">
					<ul class="navbar-nav ml-auto">
						<li class="nav-item"><a class="nav-link" href="index.html">Início</a></li>
						<li class="nav-item"><a class="nav-link" href="services.html">Serviços</a></li>					
						<li class="nav-item"><a class="nav-link" href="appointment.html">Agendamento</a></li>
						<li class="nav-item"><a class="nav-link" href="contact.html">Contato</a></li>
					</ul>
				</div>
			</div>
		</nav>
	</header>
	<!-- End header -->

	<!-- Page Content -->
	<div id="body" style="width: 100%; height: 700px; display: none; "  class="col-lg-12 body">
		<img src="images/logo.png" style=" position: absolute; left: 33%; width: 33%; top: 60%; ">
		<h1 style=" position: absolute; left: 25%; width: 50%; top: 10%; ">Buscando... <i class="fas fa-search"></i> </h1>
		<div class="blobs">
			<div class="blob four move"></div>
			<div class="norm blob one"></div>
		  </div>
		  
		  <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
			<defs>
			  <filter id="goo">
				<feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur" />
				<feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7" result="goo" />
				<feBlend in="SourceGraphic" in2="goo" />
				</filter>
			</defs>
		  </svg>
	</div>
	<div id="page-content-wrapper">
		<div class="all-page-bar">
			<div class="container">
				<div class="row">
					<div class="col-xs-12 col-sm-12 col-md-12">
						<div class="title title-1 text-center">
							<div class="much">
								<img src="uploads/mustache.png" alt=""/>
							</div>
							
							<div class="title--heading">
								<h1>Agendamento</h1>
							</div>
							<div class="clearfix"></div>
							
							<ol class="breadcrumb">
								<li><a href="index-3.html">Início</a></li>
								<li class="active">Agendamento</li>
							</ol>
						</div>
						<!-- .title end -->
					</div>
				</div>
			</div>
		</div><!-- end all-page-bar -->

		<div id="appointment" class="section wb">
			<div class="container">
				<div class="section-title row text-center">
					<div class="col-md-8 offset-md-2">
						<small>BORA ENCONTRAR O HORÁRIO PERFEITO PARA O SEU ATENDIMENTO!</small>
						<h3>Pesquise agora!</h3>
					</div>
				</div><!-- end title -->

				<div class="row">
				
					<div class="col-lg-12">
						<div class="col-lg-8" style="margin: auto;">
							<div class="section-title row  ">
								<div class="col-md-8 offset-md-2">
									<h4 style="text-align: left;">SELECIONE O DIA:</h4> 
									<div class="row">
									
										<div style="max-width: 45%;     margin: auto;" class="input-group">
											
											<input style="    border: 2px solid red;border-radius: 20px;" type="date" class="form-control" id="data">
										</div>
										
										<div style="max-width: 45%;" class="form-btn text-center">
											<button value="SEND" id="pesquisar" class="btn btn-light btn-radius btn-brd grd1 btn-block subt">Consultar</button>
										</div>
		
									</div>
			

								
								</div>

								<br>
								<br>
								<br>
								<hr>
								<div style="margin: auto;" class="col-md-8">
									
									<small>Temos horários livres nos seguintes dias:</small>
									<div id="sugestoes" style="border: 2px solid red; border-radius: 20px; padding: 5%" class="col-md-12">
										
									</div>
								</div>
							</div><!-- end title -->
							
							
						</div>
						<div style="display: none;" class="contact_form">
							<div id="message"></div>
							<form id="contactform" class="" action="contact.php" name="contactform" method="post">
								<fieldset class="row row-fluid">
									<div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
										<input type="text" name="first_name" id="first_name" class="form-control" placeholder="First Name">
									</div>
									<div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
										<input type="text" name="last_name" id="last_name" class="form-control" placeholder="Last Name">
									</div>
									<div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
										<input type="email" name="email" id="email" class="form-control" placeholder="Your Email">
									</div>
									<div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
										<input type="text" name="phone" id="phone" class="form-control" placeholder="Your Phone">
									</div>
									<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
										<select id="basic" class="form-control">
											<option value="selecttime">Select Time</option>
											<option value="Weekdays">Segunda a Sexta</option>
											<option value="Weekend">Sábados</option>
										</select>
									</div>
									<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
										<textarea class="form-control" name="comments" id="comments" rows="6" placeholder="Conte mais sobre o que precisa.."></textarea>
									</div>
									<div class="form-btn text-center">
										<button type="submit" value="SEND" id="submit" class="btn btn-light btn-radius btn-brd grd1 btn-block subt">Agendar agora</button>
									</div>
								</fieldset>
							</form>
						</div>
					</div><!-- end col -->
				</div><!-- end row -->
			</div><!-- end container -->
		</div><!-- end section -->

		<div id="testimonials" class="parallax section db parallax-inner-bg">
			<div class="container">
				<div class="section-title row text-center">
					<div class="col-md-8 offset-md-2">
						<small>OUÇA O QUE NOSSOS CLIENTES TEM A DIZER</small>
						<h3>COMENTÁRIOS</h3>
					</div>
				</div><!-- end title -->

				<div class="row">
					<div class="col-md-12 col-sm-12">
						<div class="testi-carousel owl-carousel owl-theme">                                
							<div class="testimonial clearfix">
								<div class="testi-meta">
									<i class="fa fa-quote-right"></i>
									<img src="uploads/testi_01.png" alt="" class="img-responsive alignright">
									<h4>James Fernando <small>- Manager of Racer</small></h4>
								</div>
								<div class="desc">
									<h3>Wonderful Support!</h3>
									<p class="lead">They have got my project on time with the competition with a sed highly skilled, and experienced & professional team.</p>
								</div>
								<!-- end testi-meta -->
							</div>
							<!-- end testimonial -->
							<div class="testimonial clearfix">
								<div class="testi-meta">
									<i class="fa fa-quote-right"></i>
									<img src="uploads/testi_02.png" alt="" class="img-responsive alignright">
									<h4>Jacques Philips <small>- Designer</small></h4>
								</div>
								<div class="desc">
									<h3>Awesome Services!</h3>
									<p class="lead">Explain to you how all this mistaken idea of denouncing pleasure and praising pain was born and I will give you completed.</p>
								</div>
								<!-- end testi-meta -->
							</div>
							<!-- end testimonial -->
							<div class="testimonial clearfix">
								<div class="testi-meta">
									<i class="fa fa-quote-right"></i>
									<img src="uploads/testi_03.png" alt="" class="img-responsive alignright">
									<h4>Venanda Mercy <small>- Newyork City</small></h4>
								</div>
								<div class="desc">
									<h3>Great & Talented Team!</h3>
									<p class="lead">The master-builder of human happines no one rejects, dislikes avoids pleasure itself, because it is very pursue pleasure. </p>
								</div>
								<!-- end testi-meta -->
							</div>
							<!-- end testimonial -->
							<div class="testimonial clearfix">
								<div class="testi-meta">
									<i class="fa fa-quote-right"></i>
									<img src="uploads/testi_03.png" alt="" class="img-responsive alignright">
									<h4>Venanda Mercy <small>- Newyork City</small></h4>
								</div>
								<div class="desc">
									<h3> Great & Talented Team!</h3>
									<p class="lead">The master-builder of human happines no one rejects, dislikes avoids pleasure itself, because it is very pursue pleasure. </p>
								</div>
								<!-- end testi-meta -->
							</div>
							<!-- end testimonial -->
						</div><!-- end carousel -->
					</div><!-- end col -->
				</div><!-- end row -->
			</div><!-- end container -->
		</div><!-- end section -->

		<div class="copyrights">
			<div class="container">
				<div class="footer-distributed">
					<div class="footer-left">
						<p class="footer-links">
							<a href="#">Início</a>
							<a href="#">Serviços</a>
							<a href="#">Agendamento</a>
							<a href="#">Contato</a>
							
						</p>
						<p class="footer-company-name">Todos os direitos reservados. &copy; 2021 <a href="https://ma.me/5527998792657">Site Oficial  - Mack Barbearia</a> Desenvolvido por: <a href="https://ma.me/5527996011204">Ronan Rodrigues +55 27 996011204</a></p>
					</div>
				</div>
			</div><!-- end container -->
		</div><!-- end copyrights -->
	</div>
    

    <a href="#" id="scroll-to-top" class="dmtop global-radius"><i class="fa fa-angle-up"></i></a>

    <!-- ALL JS FILES -->
    <script src="js/all.js"></script>
	<script src="js/responsive-tabs.js"></script>
    <!-- ALL PLUGINS -->
    <script src="js/custom.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/5.5.2/bootbox.min.js"></script>
    <!-- Menu Toggle Script -->
    <script>
			var AGENDA = [];
    (function($) {
        "use strict";
        $("#menu-toggle").click(function(e) {
            e.preventDefault();
            $("#wrapper").toggleClass("toggled");
        });
        smoothScroll.init({
            selector: '[data-scroll]', // Selector for links (must be a class, ID, data attribute, or element tag)
            selectorHeader: null, // Selector for fixed headers (must be a valid CSS selector) [optional]
            speed: 500, // Integer. How fast to complete the scroll in milliseconds
            easing: 'easeInOutCubic', // Easing pattern to use
            offset: 0, // Integer. How far to offset the scrolling anchor location in pixels
            callback: function ( anchor, toggle ) {} // Function to run after scrolling
        });
    })(jQuery);

	function getDay(day){
		var days = [
			{"day":"Seg", "number": 1},
			{"day":"Ter", "number": 2},
			{"day":"Qua", "number": 3},
			{"day":"Qui", "number": 4},
			{"day":"Sex", "number": 5},
			{"day":"Sab", "number": 6},		
			{"day":"Dom", "number": 0},
		]
		for(const k in days){
			if(day == days[k].number){
				return days[k].day
			}
		}
	}

	setTimeout(() => {
		
		for (let index = 1; index < 14; index++) {
			var now = moment();
			var day = now.add(index, "days")
			console.log(index+" index "+day.day() +" -> "+day.format("YYYY-MM-DD"))
			if(day.day() != 0){
				var HTML  = '<button style="cursor: pointer; margin-left: 2%;line-height: 1.0; margin-top: 2%; border-radius: 20px" class="btn-sm btn-danger" data="'+day.format("YYYY-MM-DD")+'">'+getDay(day.day())+'<br>'+day.format("DD/MM")+'</button>';
				$("#sugestoes").append(HTML)
			}
			
		}

		$(".btn-sm").click(function(){
			$("#data").val($(this).attr("data"));
			$("#pesquisar").css("font-size","0.6rem")
			$("#pesquisar").css("padding","2%")
			$("#pesquisar").addClass("pulse")
		})

		$("#data").change(function(){
			$("#data").val($(this).attr("data"));
			$("#pesquisar").css("font-size","0.6rem")
			$("#pesquisar").css("padding","2%")
			$("#pesquisar").addClass("pulse")
		})

		$("#pesquisar").click(function(){
			$("#page-content-wrapper").hide();
			$("#body").fadeIn()
			$("#body").addClass("body")
			$("#appointment").css("filter", "blur(10px)")
		
			$.ajax({
				type: 'GET',
				url: 'https://printmer.com.br/agenda',
				data: "",
				success: function (data) {
					AGENDA = data
				},
				error: function (data) {
					console.log(data)
				},
				complete: function(){
					// ao final da requisição...
				}
			});



			setTimeout(() => {
				$("#page-content-wrapper").fadeIn();
				$("#body").hide()
				$("#body").removeClass("body")
				$("#appointment").css("filter", "none");
				var html = ''

				function getHorario(dia,horario){
					var hours = []
					if(AGENDA.length > 0){
						for(const k in AGENDA){
								if(AGENDA[k].horario == horario && AGENDA[k].data == dia){
									hours.push(AGENDA[k])
								}
						}
							if(hours.length <= 1){
								return true;
							}else{
								return false;
							}
					}else{
						return true
					}
					
				}
				
				var data = $("#data").val()
				var incremento = 30
				for(let a = 0; a < 24; a++){
					var quando = moment(data + " 08:00:00")
					console.log(data)
					console.log(quando.format("HH:mm"))
					quando.add(incremento, "minutes")
					incremento += 30
					if(getHorario(data, quando.format("HH:mm"))){
						html += '<ol class="breadcrumb horaEscolhida" style="margin: 1%; max-width: 45%; padding:2%;cursor:pointer"> <li style="color: green"> <i class="fas fa-thumbs-up"></i> <a > '+quando.format("HH:mm")+'</a></ol>'
						//html+= '<button style="margin: 1%; min-width: 21%" class="btn-sm btn-success horarius">'+quando.format("HH:mm")+'</button>';
					}else{
						html += '<ol class="breadcrumb bg-dark horaEscolhida horaInvalida" style="margin: 1%; max-width: 45%; padding:2%;cursor:pointer"> <li  style="color: red"> <i class="fas fa-thumbs-down"></i> <a >'+quando.format("HH:mm")+'</a></ol>'
						//html+= '<button class="btn-sm btn-dark horarius">'+quando.format("HH:mm")+'</button>';
					}
				}

				bootbox.confirm({
					message: "<span style='margin: auto'><i style='color:green' class='fas fa-thumbs-up'></i> Livre | <i style='color:red' class='fas fa-thumbs-down'></i> Ocupado</span><hr><br><div class='col-md-12'><div class='row'>"+html+"</div>",
					title: "Temos vaga no dia "+quando.format("DD/MM")+", escolha o seu horário!",
					onShow: function(){
						$(".horaEscolhida").click(function(){
							$(".horaEscolhida").css("filter","blur(5px)")
							$(".horaEscolhida").removeClass("selecionada");
							$(this).css("filter","none");
							$(this).addClass("selecionada");
							//$(this).append("<button class='btn-sm btn-danger closeWindow'>Cancelar</button>")
						})

						/*
						$(".closeWindow").click(function(){
							$(this).parent().removeClass("selecionada")
						})
						*/

					},
					callback: function (result) {
						console.log(result);
					}
				});

			}, 10000);

		})

	}, 1000);

	
    </script>

</body>
</html>